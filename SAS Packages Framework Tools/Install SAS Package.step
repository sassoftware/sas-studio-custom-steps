{"creationTimeStamp":"2025-12-12T19:45:13.070975Z","createdBy":"Stu.Sztukowski@sas.com","modifiedTimeStamp":"2026-01-21T21:19:32.37764Z","modifiedBy":"Stu.Sztukowski@sas.com","id":"4ebe0536-c260-4de3-a8cd-5a94d4eaa082","name":"Install SAS Package.step","displayName":"Install SAS Package.step","localDisplayName":"Install SAS Package.step","links":[{"method":"GET","rel":"self","href":"/dataFlows/steps/4ebe0536-c260-4de3-a8cd-5a94d4eaa082","uri":"/dataFlows/steps/4ebe0536-c260-4de3-a8cd-5a94d4eaa082","type":"application/vnd.sas.data.flow.step"},{"method":"GET","rel":"alternate","href":"/dataFlows/steps/4ebe0536-c260-4de3-a8cd-5a94d4eaa082","uri":"/dataFlows/steps/4ebe0536-c260-4de3-a8cd-5a94d4eaa082","type":"application/vnd.sas.data.flow.step.summary"},{"method":"GET","rel":"up","href":"/dataFlows/steps","uri":"/dataFlows/steps","type":"application/vnd.sas.collection","itemType":"application/vnd.sas.data.flow.step.summary"},{"method":"PUT","rel":"update","href":"/dataFlows/steps/4ebe0536-c260-4de3-a8cd-5a94d4eaa082","uri":"/dataFlows/steps/4ebe0536-c260-4de3-a8cd-5a94d4eaa082","type":"application/vnd.sas.data.flow.step","responseType":"application/vnd.sas.data.flow.step"},{"method":"DELETE","rel":"delete","href":"/dataFlows/steps/4ebe0536-c260-4de3-a8cd-5a94d4eaa082","uri":"/dataFlows/steps/4ebe0536-c260-4de3-a8cd-5a94d4eaa082"},{"method":"POST","rel":"copy","href":"/dataFlows/steps/4ebe0536-c260-4de3-a8cd-5a94d4eaa082/copy","uri":"/dataFlows/steps/4ebe0536-c260-4de3-a8cd-5a94d4eaa082/copy","responseType":"application/vnd.sas.data.flow.step"},{"method":"GET","rel":"transferExport","href":"/dataFlows/steps/4ebe0536-c260-4de3-a8cd-5a94d4eaa082","uri":"/dataFlows/steps/4ebe0536-c260-4de3-a8cd-5a94d4eaa082","responseType":"application/vnd.sas.transfer.object"},{"method":"PUT","rel":"transferImportUpdate","href":"/dataFlows/steps/4ebe0536-c260-4de3-a8cd-5a94d4eaa082","uri":"/dataFlows/steps/4ebe0536-c260-4de3-a8cd-5a94d4eaa082","type":"application/vnd.sas.transfer.object","responseType":"application/vnd.sas.summary"}],"metadataVersion":1,"version":2,"type":"code","flowMetadata":{"inputPorts":[{"name":"inputtable1","displayName":"inputtable1","localDisplayName":"inputtable1","minEntries":0,"maxEntries":1,"defaultEntries":0,"type":"table"}],"outputPorts":[{"name":"outputtable1","displayName":"outputtable1","localDisplayName":"outputtable1","minEntries":0,"maxEntries":1,"defaultEntries":0,"type":"table"}]},"ui":"{\n\t\"showPageContentOnly\": true,\n\t\"pages\": [\n\t\t{\n\t\t\t\"id\": \"page1\",\n\t\t\t\"type\": \"page\",\n\t\t\t\"label\": \"Main\",\n\t\t\t\"children\": [\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"text1\",\n\t\t\t\t\t\"type\": \"text\",\n\t\t\t\t\t\"text\": \"Install one or more SAS Packages from the SAS Package Framework. The SAS Packages Framework must be initialized before running this step. \",\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"spf_install_debug\",\n\t\t\t\t\t\"type\": \"checkbox\",\n\t\t\t\t\t\"label\": \"Debug (Change dependency to view or hide)\",\n\t\t\t\t\t\"visible\": [\n\t\t\t\t\t\t1,\n\t\t\t\t\t\t\"=\",\n\t\t\t\t\t\t0\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"spf_repo\",\n\t\t\t\t\t\"type\": \"radiogroup\",\n\t\t\t\t\t\"label\": \"Package Repository\",\n\t\t\t\t\t\"items\": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"value\": \"SAS Packages\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"value\": \"PharmaForest\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"value\": \"GitHub\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"value\": \"Custom\"\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"spf_github_name\",\n\t\t\t\t\t\"type\": \"textfield\",\n\t\t\t\t\t\"label\": \"\",\n\t\t\t\t\t\"placeholder\": \"Enter GitHub username or organization\",\n\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\"visible\": [\n\t\t\t\t\t\t\"$spf_repo\",\n\t\t\t\t\t\t\"=\",\n\t\t\t\t\t\t\"GitHub\"\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"spf_custom_url\",\n\t\t\t\t\t\"type\": \"textfield\",\n\t\t\t\t\t\"label\": \"\",\n\t\t\t\t\t\"placeholder\": \"Enter URL for a package repository\",\n\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\"visible\": [\n\t\t\t\t\t\t\"$spf_repo\",\n\t\t\t\t\t\t\"=\",\n\t\t\t\t\t\t\"Custom\"\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"spf_package_update\",\n\t\t\t\t\t\"type\": \"checkbox\",\n\t\t\t\t\t\"label\": \"Update Packages\",\n\t\t\t\t\t\"visible\": \"\",\n\t\t\t\t\t\"indent\": 0\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"spf_package_list\",\n\t\t\t\t\t\"type\": \"textarea\",\n\t\t\t\t\t\"label\": \"Package list (space or carriage-return separated)\",\n\t\t\t\t\t\"placeholder\": \"Enter one or more packages\",\n\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"inputtable1\",\n\t\t\t\t\t\"type\": \"inputtable\",\n\t\t\t\t\t\"label\": \"Used only to add an input port for connecting nodes\",\n\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\"visible\": [\n\t\t\t\t\t\t1,\n\t\t\t\t\t\t\"=\",\n\t\t\t\t\t\t0\n\t\t\t\t\t],\n\t\t\t\t\t\"filter\": false,\n\t\t\t\t\t\"readonly\": false\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"outputtable1\",\n\t\t\t\t\t\"type\": \"outputtable\",\n\t\t\t\t\t\"label\": \"Used only to add an output port for connecting nodes\",\n\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\"visible\": [\n\t\t\t\t\t\t1,\n\t\t\t\t\t\t\"=\",\n\t\t\t\t\t\t0\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t],\n\t\"syntaxversion\": \"1.3.0\",\n\t\"values\": {\n\t\t\"spf_install_debug\": false,\n\t\t\"spf_repo\": {\n\t\t\t\"value\": \"SAS Packages\"\n\t\t},\n\t\t\"spf_github_name\": \"\",\n\t\t\"spf_custom_url\": \"\",\n\t\t\"spf_package_update\": true,\n\t\t\"spf_package_list\": \"\",\n\t\t\"inputtable1\": {\n\t\t\t\"library\": \"\",\n\t\t\t\"table\": \"\"\n\t\t},\n\t\t\"outputtable1\": {\n\t\t\t\"library\": \"\",\n\t\t\t\"table\": \"\"\n\t\t}\n\t},\n\t\"promptHierarchies\": []\n}","localUi":"{\"pages\":[{\"children\":[{\"id\":\"text1\",\"text\":\"Install one or more SAS Packages from the SAS Package Framework. The SAS Packages Framework must be initialized before running this step. \",\"type\":\"text\",\"visible\":\"\"},{\"id\":\"spf_install_debug\",\"label\":\"Debug (Change dependency to view or hide)\",\"type\":\"checkbox\",\"visible\":[1,\"=\",0]},{\"id\":\"spf_repo\",\"items\":[{\"value\":\"SAS Packages\"},{\"value\":\"PharmaForest\"},{\"value\":\"GitHub\"},{\"value\":\"Custom\"}],\"label\":\"Package Repository\",\"type\":\"radiogroup\",\"visible\":\"\"},{\"id\":\"spf_github_name\",\"label\":\"\",\"placeholder\":\"Enter GitHub username or organization\",\"required\":true,\"type\":\"textfield\",\"visible\":[\"$spf_repo\",\"=\",\"GitHub\"]},{\"id\":\"spf_custom_url\",\"label\":\"\",\"placeholder\":\"Enter URL for a package repository\",\"required\":true,\"type\":\"textfield\",\"visible\":[\"$spf_repo\",\"=\",\"Custom\"]},{\"id\":\"spf_package_update\",\"indent\":0,\"label\":\"Update Packages\",\"type\":\"checkbox\",\"visible\":\"\"},{\"id\":\"spf_package_list\",\"label\":\"Package list (space or carriage-return separated)\",\"placeholder\":\"Enter one or more packages\",\"required\":true,\"type\":\"textarea\",\"visible\":\"\"},{\"filter\":false,\"id\":\"inputtable1\",\"label\":\"Used only to add an input port for connecting nodes\",\"placeholder\":\"\",\"readonly\":false,\"required\":false,\"type\":\"inputtable\",\"visible\":[1,\"=\",0]},{\"id\":\"outputtable1\",\"label\":\"Used only to add an output port for connecting nodes\",\"placeholder\":\"\",\"required\":false,\"type\":\"outputtable\",\"visible\":[1,\"=\",0]}],\"id\":\"page1\",\"label\":\"Main\",\"type\":\"page\"}],\"promptHierarchies\":[],\"showPageContentOnly\":true,\"syntaxversion\":\"1.3.0\",\"values\":{\"inputtable1\":{\"library\":\"\",\"table\":\"\"},\"outputtable1\":{\"library\":\"\",\"table\":\"\"},\"spf_custom_url\":\"\",\"spf_github_name\":\"\",\"spf_install_debug\":false,\"spf_package_list\":\"\",\"spf_package_update\":true,\"spf_repo\":{\"value\":\"SAS Packages\"}}}","templates":{"SAS":"%if &spf_install_debug %then %do;\r\n    %let spf_install_orig_symbolgen = %sysfunc(getoption(symbolgen));\r\n    %let spf_install_orig_mlogic = %sysfunc(getoption(mlogic));\r\n    %let spf_install_orig_mprint = %sysfunc(getoption(mprint));\r\n    %let spf_install_orig_mlogicnest = %sysfunc(getoption(mlogicnest));\r\n    %let spf_install_orig_mprintnest = %sysfunc(getoption(mprintnest));\r\n    options symbolgen mlogic mprint mlogicnest mprintnest;\r\n%end;\r\n\r\n%macro spf_install_step;\r\n    %local spf_repo_arg\r\n           spf_install_args\r\n    ;\r\n\r\n    %if NOT %sysmacexist(installPackage) %then %do;\r\n        %put ERROR: You must initialize the SAS Packages Framework before running the Install Package step.;\r\n        %abort cancel;\r\n    %end;\r\n\r\n    %let spf_repo = %upcase(&spf_repo);\r\n    \r\n    /* Set installPackage options depending on the repo selected */\r\n    %if &spf_repo = PHARMAFOREST %then\r\n        %let spf_repo_arg = mirror=3\r\n    ;\r\n\r\n    %else %if &spf_repo = GITHUB %then\r\n        %let spf_repo_arg = github=&spf_github_name\r\n    ;\r\n\r\n    %else %if &spf_repo = CUSTOM %then %do;\r\n\r\n        /* Add an ending / if the user forgot - requirement for this option */\r\n        %if %substr(&spf_custom_url, %length(&spf_custom_url), 1) NE %str(/) %then\r\n            %let spf_custom_url = &spf_custom_url/\r\n        ;\r\n\r\n        %let spf_repo_arg = sourcePath=&spf_custom_url;\r\n    %end;\r\n\r\n    %else %let spf_repo_arg=;\r\n\r\n    %let spf_install_args = replace=&spf_package_update;\r\n\r\n    /* Add future arguments here */\r\n    %if %length(&spf_repo_arg) > 0 %then \r\n        %let spf_install_args = &spf_install_args, &spf_repo_arg\r\n    ;\r\n\r\n    /* Install packages. Must be a space-separated list. */\r\n    %installPackage(%sysfunc(translate(%superq(spf_package_list), ' ', '0D0A'x)), &spf_install_args);\r\n\r\n    /* Copy from WORK to SAS Content if SAS Content was specified */\r\n    %if %symexist(spf_package_path_sascontent) %then %do;\r\n        %if %bquote(&spf_package_path_sascontent) NE %then %do;\r\n\r\n            %put NOTE: Copying packages from WORK to sascontent:&spf_package_path_sascontent;\r\n                \r\n            %relocatePackage(\r\n                %sysfunc(translate(%superq(spf_package_list), ' ', '0D0A'x)), \r\n                target=&spf_package_path_sascontent, \r\n                tDevice=FILESRVC,\r\n                ignorePackagesFilerefCheck=1,\r\n                checksum=%sysevalf(NOT &spf_package_update, boolean) /* Do not check hashes if spf_package_update is true */\r\n            );\r\n        %end;\r\n    %end;\r\n\r\n%mend spf_install_step;\r\n\r\n%spf_install_step;\r\n\r\n%if &spf_install_debug %then %do;\r\n    options &spf_install_orig_symbolgen \r\n            &spf_install_orig_mlogic \r\n            &spf_install_orig_mlogicnest \r\n            &spf_install_orig_mprint \r\n            &spf_install_orig_mprintnest\r\n    ;\r\n%end;"}}
