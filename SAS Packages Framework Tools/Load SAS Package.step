{"creationTimeStamp":"2025-12-11T21:03:57.533711Z","createdBy":"Stu.Sztukowski@sas.com","modifiedTimeStamp":"2026-02-03T19:09:04.785488Z","modifiedBy":"Stu.Sztukowski@sas.com","id":"fcf97ee7-4640-4cc4-83fb-430b3cf82a65","name":"Load SAS Package.step","displayName":"Load SAS Package.step","localDisplayName":"Load SAS Package.step","links":[{"method":"GET","rel":"self","href":"/dataFlows/steps/fcf97ee7-4640-4cc4-83fb-430b3cf82a65","uri":"/dataFlows/steps/fcf97ee7-4640-4cc4-83fb-430b3cf82a65","type":"application/vnd.sas.data.flow.step"},{"method":"GET","rel":"alternate","href":"/dataFlows/steps/fcf97ee7-4640-4cc4-83fb-430b3cf82a65","uri":"/dataFlows/steps/fcf97ee7-4640-4cc4-83fb-430b3cf82a65","type":"application/vnd.sas.data.flow.step.summary"},{"method":"GET","rel":"up","href":"/dataFlows/steps","uri":"/dataFlows/steps","type":"application/vnd.sas.collection","itemType":"application/vnd.sas.data.flow.step.summary"},{"method":"PUT","rel":"update","href":"/dataFlows/steps/fcf97ee7-4640-4cc4-83fb-430b3cf82a65","uri":"/dataFlows/steps/fcf97ee7-4640-4cc4-83fb-430b3cf82a65","type":"application/vnd.sas.data.flow.step","responseType":"application/vnd.sas.data.flow.step"},{"method":"DELETE","rel":"delete","href":"/dataFlows/steps/fcf97ee7-4640-4cc4-83fb-430b3cf82a65","uri":"/dataFlows/steps/fcf97ee7-4640-4cc4-83fb-430b3cf82a65"},{"method":"POST","rel":"copy","href":"/dataFlows/steps/fcf97ee7-4640-4cc4-83fb-430b3cf82a65/copy","uri":"/dataFlows/steps/fcf97ee7-4640-4cc4-83fb-430b3cf82a65/copy","responseType":"application/vnd.sas.data.flow.step"},{"method":"GET","rel":"transferExport","href":"/dataFlows/steps/fcf97ee7-4640-4cc4-83fb-430b3cf82a65","uri":"/dataFlows/steps/fcf97ee7-4640-4cc4-83fb-430b3cf82a65","responseType":"application/vnd.sas.transfer.object"},{"method":"PUT","rel":"transferImportUpdate","href":"/dataFlows/steps/fcf97ee7-4640-4cc4-83fb-430b3cf82a65","uri":"/dataFlows/steps/fcf97ee7-4640-4cc4-83fb-430b3cf82a65","type":"application/vnd.sas.transfer.object","responseType":"application/vnd.sas.summary"}],"metadataVersion":1,"version":2,"type":"code","flowMetadata":{"inputPorts":[{"name":"inputtable1","displayName":"inputtable1","localDisplayName":"inputtable1","minEntries":0,"maxEntries":1,"defaultEntries":0,"type":"table"},{"name":"inputtable2","displayName":"inputtable2","localDisplayName":"inputtable2","minEntries":0,"maxEntries":1,"defaultEntries":0,"type":"table"},{"name":"inputtable3","displayName":"inputtable3","localDisplayName":"inputtable3","minEntries":0,"maxEntries":1,"defaultEntries":0,"type":"table"}],"outputPorts":[{"name":"outputtable1","displayName":"outputtable1","localDisplayName":"outputtable1","minEntries":1,"maxEntries":1,"defaultEntries":0,"type":"table"}]},"ui":"{\n\t\"showPageContentOnly\": true,\n\t\"pages\": [\n\t\t{\n\t\t\t\"id\": \"load\",\n\t\t\t\"type\": \"page\",\n\t\t\t\"label\": \"Load\",\n\t\t\t\"children\": [\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"spf_load_debug\",\n\t\t\t\t\t\"type\": \"checkbox\",\n\t\t\t\t\t\"label\": \"Debug (change dependency to view or hide)\",\n\t\t\t\t\t\"visible\": [\n\t\t\t\t\t\t1,\n\t\t\t\t\t\t\"=\",\n\t\t\t\t\t\t0\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"spf_package_list_type\",\n\t\t\t\t\t\"type\": \"radiogroup\",\n\t\t\t\t\t\"label\": \"\",\n\t\t\t\t\t\"items\": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"value\": \"One package\",\n\t\t\t\t\t\t\t\"label\": \"One package\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"value\": \"List\",\n\t\t\t\t\t\t\t\"label\": \"Multiple packages\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"value\": \"File\",\n\t\t\t\t\t\t\t\"label\": \"File\"\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"spf_package\",\n\t\t\t\t\t\"type\": \"textfield\",\n\t\t\t\t\t\"label\": \"\",\n\t\t\t\t\t\"placeholder\": \"Enter package name\",\n\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\"visible\": [\n\t\t\t\t\t\t\"$spf_package_list_type\",\n\t\t\t\t\t\t\"=\",\n\t\t\t\t\t\t\"One package\"\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"section1\",\n\t\t\t\t\t\"type\": \"section\",\n\t\t\t\t\t\"label\": \"Advanced options\",\n\t\t\t\t\t\"open\": false,\n\t\t\t\t\t\"visible\": [\n\t\t\t\t\t\t\"$spf_package_list_type\",\n\t\t\t\t\t\t\"=\",\n\t\t\t\t\t\t\"One package\"\n\t\t\t\t\t],\n\t\t\t\t\t\"enabled\": [\n\t\t\t\t\t\t\"$spf_package_list_type\",\n\t\t\t\t\t\t\"=\",\n\t\t\t\t\t\t\"One package\"\n\t\t\t\t\t],\n\t\t\t\t\t\"children\": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"spf_load_additional\",\n\t\t\t\t\t\t\t\"type\": \"checkbox\",\n\t\t\t\t\t\t\t\"label\": \"Load additional content\",\n\t\t\t\t\t\t\t\"visible\": \"\",\n\t\t\t\t\t\t\t\"indent\": 1\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"spf_load_lazy_data\",\n\t\t\t\t\t\t\t\"type\": \"checkbox\",\n\t\t\t\t\t\t\t\"label\": \"Load lazy data\",\n\t\t\t\t\t\t\t\"visible\": \"\",\n\t\t\t\t\t\t\t\"indent\": 1\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"spf_lazy_data_list\",\n\t\t\t\t\t\t\t\"type\": \"textarea\",\n\t\t\t\t\t\t\t\"label\": \"Lazy data list (space or carriage-return separated)\",\n\t\t\t\t\t\t\t\"placeholder\": \"Enter one or more lazy datasets, or enter * to load all.\",\n\t\t\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\t\t\"visible\": \"$spf_load_lazy_data\",\n\t\t\t\t\t\t\t\"indent\": 2\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"spf_load_package_elements\",\n\t\t\t\t\t\t\t\"type\": \"checkbox\",\n\t\t\t\t\t\t\t\"label\": \"Load individual package elements\",\n\t\t\t\t\t\t\t\"visible\": \"\",\n\t\t\t\t\t\t\t\"indent\": 1\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"spf_package_elements_list\",\n\t\t\t\t\t\t\t\"type\": \"textarea\",\n\t\t\t\t\t\t\t\"label\": \"Package element list (space or carriage-return separated)\",\n\t\t\t\t\t\t\t\"placeholder\": \"Enter one or more package elements, or enter * to include all.\",\n\t\t\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\t\t\"visible\": \"$spf_load_package_elements\",\n\t\t\t\t\t\t\t\"indent\": 2\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"spf_ds2_force\",\n\t\t\t\t\t\t\t\"type\": \"checkbox\",\n\t\t\t\t\t\t\t\"label\": \"Overwrite SAS datasets with DS2 packages or threads\",\n\t\t\t\t\t\t\t\"visible\": \"\",\n\t\t\t\t\t\t\t\"indent\": 1\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"spf_suppress_exec\",\n\t\t\t\t\t\t\t\"type\": \"checkbox\",\n\t\t\t\t\t\t\t\"label\": \"Do not load \\\"exec\\\" type files\",\n\t\t\t\t\t\t\t\"visible\": \"\",\n\t\t\t\t\t\t\t\"indent\": 1\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"spf_package_list\",\n\t\t\t\t\t\"type\": \"textarea\",\n\t\t\t\t\t\"label\": \"Package list (space or carriage-return separated)\",\n\t\t\t\t\t\"placeholder\": \"Enter one or more packages\",\n\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\"visible\": [\n\t\t\t\t\t\t\"$spf_package_list_type\",\n\t\t\t\t\t\t\"=\",\n\t\t\t\t\t\t\"List\"\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"spf_package_file_fqp\",\n\t\t\t\t\t\"type\": \"path\",\n\t\t\t\t\t\"label\": \"Select package file\",\n\t\t\t\t\t\"pathtype\": \"file\",\n\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\"visible\": [\n\t\t\t\t\t\t\"$spf_package_list_type\",\n\t\t\t\t\t\t\"=\",\n\t\t\t\t\t\t\"File\"\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"inputtable1\",\n\t\t\t\t\t\"type\": \"inputtable\",\n\t\t\t\t\t\"label\": \"Used only to add an input port for connecting nodes\",\n\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\"visible\": \"\",\n\t\t\t\t\t\"filter\": false,\n\t\t\t\t\t\"readonly\": false\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"inputtable2\",\n\t\t\t\t\t\"type\": \"inputtable\",\n\t\t\t\t\t\"label\": \"Used only to add an input port for connecting nodes\",\n\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\"visible\": \"\",\n\t\t\t\t\t\"filter\": false\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"inputtable3\",\n\t\t\t\t\t\"type\": \"inputtable\",\n\t\t\t\t\t\"label\": \"Used only to add an input port for connecting nodes\",\n\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\"visible\": \"\",\n\t\t\t\t\t\"filter\": false\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"outputtable1\",\n\t\t\t\t\t\"type\": \"outputtable\",\n\t\t\t\t\t\"label\": \"Used only to add an output port for connecting nodes\",\n\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"id\": \"help\",\n\t\t\t\"type\": \"page\",\n\t\t\t\"label\": \"Help\",\n\t\t\t\"children\": [\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"text2\",\n\t\t\t\t\t\"type\": \"text\",\n\t\t\t\t\t\"text\": \"The Load Packages step is an independent step that supports workflows such as loading after initializing or fine-grained control over a flow.\\n\\nℹ️ The SAS Packages Framework must be initialized before running this step. This step is supported if the SAS Packages Framework is initialized with code.\\n\\nℹ️ Packages stored in SAS Content are copied to the WORK directory before loading. If the checksum of the package in SAS Content is different from the checksum of the package in WORK, or if the package is not in WORK, the package is copied automatically.\\n\\nSAS packages installed on your system can be loaded one at a time, as a list of packages, or from or a text file. Packages from a list or a file must be space or carriage-return separated. Versions do not have an effect when loading and are automatically ignored.\\n\\nLoading one package enables advanced options for package loading. The following advanced options correspond to each parameter of %loadPackage:\\n\\n• Load addtional content: loadAddCnt\\n• Load lazy data: lazyData\\n• Load addtional package elements: cherryPick\\n• Overwrite SAS datasets with DS2 packages or threads: DS2force\\n• Suppress \\\"exec\\\" type files: suppressExec\\n\\nFor more information, see the SAS Packages Framework documentation:\\n\\nhttps://github.com/yabwon/SAS_PACKAGES/blob/main/SPF/SPFinit.md#loadpackage\",\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t],\n\t\"syntaxversion\": \"1.3.0\",\n\t\"values\": {\n\t\t\"spf_load_debug\": false,\n\t\t\"spf_package_list_type\": {\n\t\t\t\"value\": \"One package\",\n\t\t\t\"label\": \"One package\"\n\t\t},\n\t\t\"spf_package\": \"\",\n\t\t\"spf_load_additional\": false,\n\t\t\"spf_load_lazy_data\": false,\n\t\t\"spf_lazy_data_list\": \"\",\n\t\t\"spf_load_package_elements\": false,\n\t\t\"spf_package_elements_list\": \"\",\n\t\t\"spf_ds2_force\": false,\n\t\t\"spf_suppress_exec\": false,\n\t\t\"spf_package_list\": \"\",\n\t\t\"spf_package_file_fqp\": \"\",\n\t\t\"inputtable1\": {\n\t\t\t\"library\": \"\",\n\t\t\t\"table\": \"\"\n\t\t},\n\t\t\"inputtable2\": {\n\t\t\t\"library\": \"\",\n\t\t\t\"table\": \"\"\n\t\t},\n\t\t\"inputtable3\": {\n\t\t\t\"library\": \"\",\n\t\t\t\"table\": \"\"\n\t\t},\n\t\t\"outputtable1\": {\n\t\t\t\"library\": \"\",\n\t\t\t\"table\": \"\"\n\t\t}\n\t},\n\t\"promptHierarchies\": []\n}","localUi":"{\"pages\":[{\"children\":[{\"id\":\"spf_load_debug\",\"label\":\"Debug (change dependency to view or hide)\",\"type\":\"checkbox\",\"visible\":[1,\"=\",0]},{\"id\":\"spf_package_list_type\",\"items\":[{\"label\":\"One package\",\"value\":\"One package\"},{\"label\":\"Multiple packages\",\"value\":\"List\"},{\"label\":\"File\",\"value\":\"File\"}],\"label\":\"\",\"type\":\"radiogroup\",\"visible\":\"\"},{\"id\":\"spf_package\",\"label\":\"\",\"placeholder\":\"Enter package name\",\"required\":true,\"type\":\"textfield\",\"visible\":[\"$spf_package_list_type\",\"=\",\"One package\"]},{\"children\":[{\"id\":\"spf_load_additional\",\"indent\":1,\"label\":\"Load additional content\",\"type\":\"checkbox\",\"visible\":\"\"},{\"id\":\"spf_load_lazy_data\",\"indent\":1,\"label\":\"Load lazy data\",\"type\":\"checkbox\",\"visible\":\"\"},{\"id\":\"spf_lazy_data_list\",\"indent\":2,\"label\":\"Lazy data list (space or carriage-return separated)\",\"placeholder\":\"Enter one or more lazy datasets, or enter * to load all.\",\"required\":true,\"type\":\"textarea\",\"visible\":\"$spf_load_lazy_data\"},{\"id\":\"spf_load_package_elements\",\"indent\":1,\"label\":\"Load individual package elements\",\"type\":\"checkbox\",\"visible\":\"\"},{\"id\":\"spf_package_elements_list\",\"indent\":2,\"label\":\"Package element list (space or carriage-return separated)\",\"placeholder\":\"Enter one or more package elements, or enter * to include all.\",\"required\":true,\"type\":\"textarea\",\"visible\":\"$spf_load_package_elements\"},{\"id\":\"spf_ds2_force\",\"indent\":1,\"label\":\"Overwrite SAS datasets with DS2 packages or threads\",\"type\":\"checkbox\",\"visible\":\"\"},{\"id\":\"spf_suppress_exec\",\"indent\":1,\"label\":\"Do not load \\\"exec\\\" type files\",\"type\":\"checkbox\",\"visible\":\"\"}],\"enabled\":[\"$spf_package_list_type\",\"=\",\"One package\"],\"id\":\"section1\",\"label\":\"Advanced options\",\"open\":false,\"type\":\"section\",\"visible\":[\"$spf_package_list_type\",\"=\",\"One package\"]},{\"id\":\"spf_package_list\",\"label\":\"Package list (space or carriage-return separated)\",\"placeholder\":\"Enter one or more packages\",\"required\":true,\"type\":\"textarea\",\"visible\":[\"$spf_package_list_type\",\"=\",\"List\"]},{\"id\":\"spf_package_file_fqp\",\"label\":\"Select package file\",\"pathtype\":\"file\",\"placeholder\":\"\",\"required\":true,\"type\":\"path\",\"visible\":[\"$spf_package_list_type\",\"=\",\"File\"]},{\"filter\":false,\"id\":\"inputtable1\",\"label\":\"Used only to add an input port for connecting nodes\",\"placeholder\":\"\",\"readonly\":false,\"required\":false,\"type\":\"inputtable\",\"visible\":\"\"},{\"filter\":false,\"id\":\"inputtable2\",\"label\":\"Used only to add an input port for connecting nodes\",\"placeholder\":\"\",\"required\":false,\"type\":\"inputtable\",\"visible\":\"\"},{\"filter\":false,\"id\":\"inputtable3\",\"label\":\"Used only to add an input port for connecting nodes\",\"placeholder\":\"\",\"required\":false,\"type\":\"inputtable\",\"visible\":\"\"},{\"id\":\"outputtable1\",\"label\":\"Used only to add an output port for connecting nodes\",\"placeholder\":\"\",\"required\":true,\"type\":\"outputtable\",\"visible\":\"\"}],\"id\":\"load\",\"label\":\"Load\",\"type\":\"page\"},{\"children\":[{\"id\":\"text2\",\"text\":\"The Load Packages step is an independent step that supports workflows such as loading after initializing or fine-grained control over a flow.\\n\\nℹ️ The SAS Packages Framework must be initialized before running this step. This step is supported if the SAS Packages Framework is initialized with code.\\n\\nℹ️ Packages stored in SAS Content are copied to the WORK directory before loading. If the checksum of the package in SAS Content is different from the checksum of the package in WORK, or if the package is not in WORK, the package is copied automatically.\\n\\nSAS packages installed on your system can be loaded one at a time, as a list of packages, or from or a text file. Packages from a list or a file must be space or carriage-return separated. Versions do not have an effect when loading and are automatically ignored.\\n\\nLoading one package enables advanced options for package loading. The following advanced options correspond to each parameter of %loadPackage:\\n\\n• Load addtional content: loadAddCnt\\n• Load lazy data: lazyData\\n• Load addtional package elements: cherryPick\\n• Overwrite SAS datasets with DS2 packages or threads: DS2force\\n• Suppress \\\"exec\\\" type files: suppressExec\\n\\nFor more information, see the SAS Packages Framework documentation:\\n\\nhttps://github.com/yabwon/SAS_PACKAGES/blob/main/SPF/SPFinit.md#loadpackage\",\"type\":\"text\",\"visible\":\"\"}],\"id\":\"help\",\"label\":\"Help\",\"type\":\"page\"}],\"promptHierarchies\":[],\"showPageContentOnly\":true,\"syntaxversion\":\"1.3.0\",\"values\":{\"inputtable1\":{\"library\":\"\",\"table\":\"\"},\"inputtable2\":{\"library\":\"\",\"table\":\"\"},\"inputtable3\":{\"library\":\"\",\"table\":\"\"},\"outputtable1\":{\"library\":\"\",\"table\":\"\"},\"spf_ds2_force\":false,\"spf_lazy_data_list\":\"\",\"spf_load_additional\":false,\"spf_load_debug\":false,\"spf_load_lazy_data\":false,\"spf_load_package_elements\":false,\"spf_package\":\"\",\"spf_package_elements_list\":\"\",\"spf_package_file_fqp\":\"\",\"spf_package_list\":\"\",\"spf_package_list_type\":{\"label\":\"One package\",\"value\":\"One package\"},\"spf_suppress_exec\":false}}","templates":{"SAS":"%if &spf_load_debug %then %do;\r\n    %let spf_load_orig_symbolgen  = %sysfunc(getoption(symbolgen));\r\n    %let spf_load_orig_mlogic     = %sysfunc(getoption(mlogic));\r\n    %let spf_load_orig_mprint     = %sysfunc(getoption(mprint));\r\n    %let spf_load_orig_mlogicnest = %sysfunc(getoption(mlogicnest));\r\n    %let spf_load_orig_mprintnest = %sysfunc(getoption(mprintnest));\r\n    options symbolgen mlogic mprint mlogicnest mprintnest;\r\n%end;\r\n\r\n%macro spf_load_step;\r\n    %local spf_package_file_sascontent\r\n           spf_package_file\r\n           spf_package_file_path\r\n           spf_package_file_fileref\r\n           s\r\n    ;   \r\n\r\n    %if NOT %sysmacexist(loadPackage) %then %do;\r\n        %put ERROR: You must initialize the SAS Packages Framework before running the Load Package step.;\r\n        %abort cancel;\r\n    %end;\r\n\r\n    %let spf_package_list_type = %upcase(&spf_package_list_type);\r\n\r\n    /* Load one package */\r\n    %if &spf_package_list_type = ONE PACKAGE %then %do;\r\n\r\n        /* Remove versions if the user accidentally adds them since they do nothing on load */\r\n        data _null_;\r\n            package = strip(translate(\"&spf_package\", ' ', '0D0A'x));\r\n            package = prxchange(\"s/[({\\[\\]=].*//\", -1, package);\r\n            \r\n            call symputx('spf_package', package, 'L');\r\n            call symputx('n_packages', countw(package, ' '), 'L');\r\n        run;\r\n\r\n        %if &n_packages = 0 %then %do;\r\n            %put ERROR: You must specify one package to load.;\r\n            %abort;\r\n        %end;\r\n\r\n        %else %if &n_packages > 1 %then %do;\r\n            %put ERROR: &n_packages packages were specified but expected 1. Specify only one package when using the One package option.;\r\n            %abort;\r\n        %end;\r\n\r\n        /* Should let someone still run this if they initialize it outside of the step */\r\n        %if %symexist(spf_package_path_is_sascontent) %then %do;\r\n            %if &spf_package_path_is_sascontent %then %do;\r\n                %put NOTE: Copying package %upcase(&spf_package) to WORK from sascontent:&spf_package_path_sascontent;\r\n\r\n                %relocatePackage(\r\n                    &spf_package, \r\n                    source=&spf_package_path_sascontent,\r\n                    sDevice=FILESRVC,\r\n                    checksum=1\r\n                );\r\n            %end;\r\n        %end;\r\n\r\n        /* The default value of lazyData in loadPackage is missing, so reset the lazy data list to be missing \r\n           if the user does not enable load_lazy_data */\r\n        %if NOT &spf_load_lazy_data %then %let spf_lazy_data_list = %str( );\r\n\r\n        /* The default value of cherryPick in loadPackage is *, so reset the package element list to be * \r\n           if the user does not enable cherryPick */\r\n        %if NOT &spf_load_package_elements %then %let spf_package_elements_list = *;\r\n\r\n        /* Create space and comma-separated lists / remove carriage returns */\r\n        data _null_;\r\n            call symputx('spf_lazy_data_list_clean', translate(\"&spf_lazy_data_list\", ' ', '0D0A'x), 'L');\r\n            call symputx('spf_package_elements_list_clean', translate(\"&spf_package_elements_list\", ' ', '0D0A'x), 'L');\r\n        run;\r\n\r\n        %loadPackage(\r\n            &spf_package,\r\n            lazyData     = &spf_lazy_data_list_clean,\r\n            cherryPick   = &spf_package_elements_list_clean,\r\n            DS2Force     = &spf_ds2_force,\r\n            suppressExec = &spf_suppress_exec\r\n        );\r\n    %end;\r\n\r\n        /* Load multiple packages */\r\n        %else %do;\r\n\r\n            /* Must include a list of packages or a file if installing/loading */\r\n            %if ( (&spf_package_list_type = LIST AND &spf_package_list =) OR \r\n                  (&spf_package_list_type = FILE AND &spf_package_file_fqp=)\r\n                ) %then %do;\r\n                %put ERROR: You must include a list or file of packages to install.;\r\n                %abort;\r\n            %end;\r\n            \r\n            %if &spf_package_list_type = FILE %then %do;\r\n                \r\n                /* Get filename and path:\r\n                    - packages.txt\r\n                    - /location/to/file \r\n                */\r\n                %let spf_package_file_sascontent = %sysevalf(%qscan(%qupcase(&spf_package_file_fqp), 1, /) = SASCONTENT:, boolean);\r\n                %let spf_package_file_fqp        = %qsubstr(&spf_package_file_fqp, %index(&spf_package_file_fqp, /));\r\n                %let spf_package_file            = %qscan(&spf_package_file_fqp, -1, /);\r\n                %let spf_package_file_path       = %qsubstr(&spf_package_file_fqp, 1, %eval(%length(&spf_package_file_fqp)-%length(&spf_package_file)-1));\r\n                %let spf_package_file_fileref    = pkg_%upcase(%substr(%sysfunc(tranwrd(%sysfunc(uuidgen()),-,%str())), 1, 4));\r\n\r\n                %if &spf_package_file_sascontent %then %do;\r\n                    filename &spf_package_file_fileref filesrvc\r\n                        filename=%sysfunc(quote(&spf_package_file))\r\n                        folderpath=%sysfunc(quote(&spf_package_file_path))\r\n                    ;\r\n                %end;\r\n                    %else %do;\r\n                        filename &spf_package_file_fileref %sysfunc(quote(&spf_package_file_fqp));\r\n                    %end;\r\n            %end;\r\n\r\n            /* Creates a dataset of packages and versions, and creates macro variables for:\r\n                - A space and comma-separated list of packages with normalized versions: package1(version) package2(version) ...\r\n                - A space-separated list of packages without versions: package1 package2 ...\r\n\r\n            Code that runs depends on the method of input.\r\n            */\r\n            data _null_;\r\n                length package_raw \r\n                       package \r\n                       package_list_nover $32767\r\n                ;\r\n\r\n                retain package_list_nover;\r\n                \r\n                /* Either loop through all the values in the manual list, or read from a file */\r\n                %if &spf_package_list_type = LIST %then %do;\r\n\r\n                do i = 1 to countw(\"&spf_package_list\", ,'S');\r\n                    package_raw = strip(scan(\"&spf_package_list\", i, ,'S'));\r\n\r\n                %end;\r\n\r\n                /* Or read from a file */\r\n                %else %do;\r\n\r\n                infile &spf_package_file_fileref end=eof;        \r\n                input package_raw$;\r\n                package_raw = strip(package_raw);\r\n\r\n                %end;\r\n\r\n                ver_delim = findc(package_raw, '([{=');\r\n                package   = substr(package_raw, 1, ifn(ver_delim > 0, ver_delim-1, length(package_raw)) );\r\n\r\n                /* package1 package2 package3 ... */\r\n                package_list_nover    = catx(' ', package_list_nover, package);\r\n\r\n                /* End the do loop if reading from a list */\r\n                %if &spf_package_list_type = LIST %then %do;\r\n                \r\n                end;\r\n\r\n                %end;\r\n\r\n                /* Output the list at the end. EOF if reading from file, end of loop if not */ \r\n                %if &spf_package_list_type = FILE %then %do;\r\n\r\n                if eof then do;\r\n\r\n                %end;\r\n\r\n                    /* Create valid formats for installPackage and loadPackages:\r\n                        - Space and comma-separated lists that removes versions: \r\n                            package1(6.7.0) package2(6.9.0) package3(4.2.0) --> package1 package2 package3\r\n                    */\r\n                    call symputx('spf_package_list_nover',     package_list_nover, 'L');\r\n                    call symputx('spf_package_list_nover_cs',  translate(package_list_nover, ',', ' '), 'L');\r\n                    call symputx('n_packages', countw(package_list_nover, ' '), 'L');\r\n\r\n                %if &spf_package_list_type = FILE %then %do;\r\n\r\n                end;\r\n                    \r\n                %end;\r\n\r\n                keep package;\r\n            run;\r\n\r\n            %if &spf_package_list_nover = %then %do;\r\n                %put ERROR: You must specify at least one package to load.;\r\n                %abort;\r\n            %end;\r\n\r\n            %if %symexist(spf_package_path_is_sascontent) %then %do;\r\n                %if &spf_package_path_is_sascontent %then %do;\r\n                    %if &n_packages > 1 %then %let s = s;\r\n                        %else %let s =;\r\n                        \r\n                    %put NOTE: Copying &n_packages package&s to WORK from sascontent:&spf_package_path_sascontent;\r\n\r\n                    %relocatePackage(\r\n                        &spf_package_list_nover, \r\n                        source=&spf_package_path_sascontent,\r\n                        sDevice=FILESRVC,\r\n                        checksum=1\r\n                    );\r\n                %end;\r\n            %end;\r\n\r\n            %loadPackages(&spf_package_list_nover_cs);\r\n        %end;\r\n%mend spf_load_step;\r\n%spf_load_step;\r\n\r\n%if &spf_load_debug %then %do;\r\n    options &spf_load_orig_symbolgen \r\n            &spf_load_orig_mlogic \r\n            &spf_load_orig_mlogicnest \r\n            &spf_load_orig_mprint \r\n            &spf_load_orig_mprintnest\r\n    ;\r\n%end;"}}
