{"creationTimeStamp":"2025-05-28T07:50:06.116Z","modifiedTimeStamp":"2025-05-28T13:35:24.722Z","createdBy":"p901tpe","modifiedBy":"p901tpe","name":"Airflow - Add Task.step","displayName":"Airflow - Add Task.step","localDisplayName":"Airflow - Add Task.step","properties":{},"links":[{"method":"GET","rel":"self","href":"/dataFlows/steps/e30aa5af-cc02-45a6-a74c-ae103b655595","uri":"/dataFlows/steps/e30aa5af-cc02-45a6-a74c-ae103b655595","type":"application/vnd.sas.data.flow.step"},{"method":"GET","rel":"alternate","href":"/dataFlows/steps/e30aa5af-cc02-45a6-a74c-ae103b655595","uri":"/dataFlows/steps/e30aa5af-cc02-45a6-a74c-ae103b655595","type":"application/vnd.sas.data.flow.step.summary"},{"method":"GET","rel":"up","href":"/dataFlows/steps","uri":"/dataFlows/steps","type":"application/vnd.sas.collection","itemType":"application/vnd.sas.data.flow.step.summary"},{"method":"PUT","rel":"update","href":"/dataFlows/steps/e30aa5af-cc02-45a6-a74c-ae103b655595","uri":"/dataFlows/steps/e30aa5af-cc02-45a6-a74c-ae103b655595","type":"application/vnd.sas.data.flow.step","responseType":"application/vnd.sas.data.flow.step"},{"method":"DELETE","rel":"delete","href":"/dataFlows/steps/e30aa5af-cc02-45a6-a74c-ae103b655595","uri":"/dataFlows/steps/e30aa5af-cc02-45a6-a74c-ae103b655595"},{"method":"POST","rel":"copy","href":"/dataFlows/steps/e30aa5af-cc02-45a6-a74c-ae103b655595/copy","uri":"/dataFlows/steps/e30aa5af-cc02-45a6-a74c-ae103b655595/copy","responseType":"application/vnd.sas.data.flow.step"},{"method":"GET","rel":"transferExport","href":"/dataFlows/steps/e30aa5af-cc02-45a6-a74c-ae103b655595","uri":"/dataFlows/steps/e30aa5af-cc02-45a6-a74c-ae103b655595","responseType":"application/vnd.sas.transfer.object"},{"method":"PUT","rel":"transferImportUpdate","href":"/dataFlows/steps/e30aa5af-cc02-45a6-a74c-ae103b655595","uri":"/dataFlows/steps/e30aa5af-cc02-45a6-a74c-ae103b655595","type":"application/vnd.sas.transfer.object","responseType":"application/vnd.sas.summary"}],"metadataVersion":0.0,"version":2,"type":"code","flowMetadata":{"inputPorts":[{"name":"input_step_1","displayName":"input_step_1","localDisplayName":"input_step_1","minEntries":1,"maxEntries":1,"defaultEntries":0,"type":"table"},{"name":"input_step_2","displayName":"input_step_2","localDisplayName":"input_step_2","minEntries":0,"maxEntries":1,"defaultEntries":0,"type":"table"},{"name":"input_step_3","displayName":"input_step_3","localDisplayName":"input_step_3","minEntries":0,"maxEntries":1,"defaultEntries":0,"type":"table"},{"name":"input_step_4","displayName":"input_step_4","localDisplayName":"input_step_4","minEntries":0,"maxEntries":1,"defaultEntries":0,"type":"table"},{"name":"input_step_5","displayName":"input_step_5","localDisplayName":"input_step_5","minEntries":0,"maxEntries":1,"defaultEntries":0,"type":"table"},{"name":"input_step_6","displayName":"input_step_6","localDisplayName":"input_step_6","minEntries":0,"maxEntries":1,"defaultEntries":0,"type":"table"},{"name":"input_step_7","displayName":"input_step_7","localDisplayName":"input_step_7","minEntries":0,"maxEntries":1,"defaultEntries":0,"type":"table"},{"name":"input_step_8","displayName":"input_step_8","localDisplayName":"input_step_8","minEntries":0,"maxEntries":1,"defaultEntries":0,"type":"table"},{"name":"input_step_9","displayName":"input_step_9","localDisplayName":"input_step_9","minEntries":0,"maxEntries":1,"defaultEntries":0,"type":"table"},{"name":"input_step_10","displayName":"input_step_10","localDisplayName":"input_step_10","minEntries":0,"maxEntries":1,"defaultEntries":0,"type":"table"}],"outputPorts":[{"name":"output_step_1","displayName":"output_step_1","localDisplayName":"output_step_1","minEntries":1,"maxEntries":1,"defaultEntries":0,"type":"table","supportsView":false,"requiresStructure":false}]},"ui":"{\n\t\"showPageContentOnly\": true,\n\t\"pages\": [\n\t\t{\n\t\t\t\"id\": \"pageTask\",\n\t\t\t\"type\": \"page\",\n\t\t\t\"label\": \"Task\",\n\t\t\t\"children\": [\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"__task_type\",\n\t\t\t\t\t\"type\": \"radiogroup\",\n\t\t\t\t\t\"label\": \"Task type:\",\n\t\t\t\t\t\"items\": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"value\": \"FILE\",\n\t\t\t\t\t\t\t\"label\": \"Select a SAS file (flow, program, job)\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"value\": \"CODE\",\n\t\t\t\t\t\t\t\"label\": \"Embed SAS code\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"value\": \"FILESENSOR\",\n\t\t\t\t\t\t\t\"label\": \"Airflow FileSensor (wait for a file)\"\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"section2\",\n\t\t\t\t\t\"type\": \"section\",\n\t\t\t\t\t\"label\": \"SAS Studio flow, SAS program or SAS job definition\",\n\t\t\t\t\t\"open\": true,\n\t\t\t\t\t\"visible\": [\n\t\t\t\t\t\t\"$__task_type\",\n\t\t\t\t\t\t\"=\",\n\t\t\t\t\t\t\"FILE\"\n\t\t\t\t\t],\n\t\t\t\t\t\"children\": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"__task_object_path\",\n\t\t\t\t\t\t\t\"type\": \"path\",\n\t\t\t\t\t\t\t\"label\": \"\",\n\t\t\t\t\t\t\t\"pathtype\": \"file\",\n\t\t\t\t\t\t\t\"placeholder\": \"Choose a SAS Studio flow, SAS program or SAS job definition\",\n\t\t\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"section3\",\n\t\t\t\t\t\"type\": \"section\",\n\t\t\t\t\t\"label\": \"Embed SAS code\",\n\t\t\t\t\t\"open\": true,\n\t\t\t\t\t\"visible\": [\n\t\t\t\t\t\t\"$__task_type\",\n\t\t\t\t\t\t\"=\",\n\t\t\t\t\t\t\"CODE\"\n\t\t\t\t\t],\n\t\t\t\t\t\"children\": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"__task_code\",\n\t\t\t\t\t\t\t\"type\": \"textarea\",\n\t\t\t\t\t\t\t\"label\": \"SAS code:\",\n\t\t\t\t\t\t\t\"placeholder\": \"/* SAS code */\\n\",\n\t\t\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"section7\",\n\t\t\t\t\t\"type\": \"section\",\n\t\t\t\t\t\"label\": \"Airflow FileSensor\",\n\t\t\t\t\t\"open\": true,\n\t\t\t\t\t\"visible\": [\n\t\t\t\t\t\t\"$__task_type\",\n\t\t\t\t\t\t\"=\",\n\t\t\t\t\t\t\"FILESENSOR\"\n\t\t\t\t\t],\n\t\t\t\t\t\"children\": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"text6\",\n\t\t\t\t\t\t\t\"type\": \"text\",\n\t\t\t\t\t\t\t\"text\": \"For easier setup, make Airflow have access to the same files (mounted the same way) as SAS Viya, and select a file on the SAS server.\\nIf not, you can just type in a file reference starting with \\\"sasserver:\\\". The file path will be checked exactly as it is typed.\\nThe file path will be checked from Airflow side, not from SAS side.\",\n\t\t\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"__task_fs_file\",\n\t\t\t\t\t\t\t\"type\": \"path\",\n\t\t\t\t\t\t\t\"label\": \"File to check existence:\",\n\t\t\t\t\t\t\t\"pathtype\": \"file\",\n\t\t\t\t\t\t\t\"placeholder\": \"Choose a file on the SAS Server whose existence will be checked\",\n\t\t\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"__task_fs_con_name\",\n\t\t\t\t\t\t\t\"type\": \"textfield\",\n\t\t\t\t\t\t\t\"label\": \"File (path) connection name in Airflow:\",\n\t\t\t\t\t\t\t\"placeholder\": \"Name of the File (path) connection in Airflow\",\n\t\t\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"__task_fs_poke\",\n\t\t\t\t\t\t\t\"type\": \"numberfield\",\n\t\t\t\t\t\t\t\"label\": \"Poke interval (seconds):\",\n\t\t\t\t\t\t\t\"placeholder\": \"Time in seconds that the sensor waits before checking the condition again\",\n\t\t\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\t\t\"max\": null,\n\t\t\t\t\t\t\t\"min\": null,\n\t\t\t\t\t\t\t\"visible\": \"\",\n\t\t\t\t\t\t\t\"integer\": true\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"__task_fs_timeout\",\n\t\t\t\t\t\t\t\"type\": \"numberfield\",\n\t\t\t\t\t\t\t\"label\": \"Timeout (seconds):\",\n\t\t\t\t\t\t\t\"placeholder\": \"The maximum amount of time in seconds that the sensor checks the condition\",\n\t\t\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\t\t\"max\": null,\n\t\t\t\t\t\t\t\"min\": null,\n\t\t\t\t\t\t\t\"visible\": \"\",\n\t\t\t\t\t\t\t\"integer\": true\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"__task_fs_mode\",\n\t\t\t\t\t\t\t\"type\": \"radiogroup\",\n\t\t\t\t\t\t\t\"label\": \"Mode:\",\n\t\t\t\t\t\t\t\"items\": [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"value\": \"poke\",\n\t\t\t\t\t\t\t\t\t\"label\": \"Poke\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"value\": \"reschedule\",\n\t\t\t\t\t\t\t\t\t\"label\": \"Reschedule\"\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"section10\",\n\t\t\t\t\t\"type\": \"section\",\n\t\t\t\t\t\"label\": \"Trigger rule\",\n\t\t\t\t\t\"open\": true,\n\t\t\t\t\t\"visible\": \"\",\n\t\t\t\t\t\"children\": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"__task_trigger_rule\",\n\t\t\t\t\t\t\t\"type\": \"dropdown\",\n\t\t\t\t\t\t\t\"label\": \"\",\n\t\t\t\t\t\t\t\"items\": [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"value\": \"all_success\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"value\": \"all_failed\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"value\": \"all_done\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"value\": \"all_skipped\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"value\": \"one_success\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"value\": \"one_done\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"value\": \"one_failed\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"value\": \"none_failed\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"value\": \"none_failed_min_one_success\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"value\": \"none_skipped\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"value\": \"always\"\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"section1\",\n\t\t\t\t\t\"type\": \"section\",\n\t\t\t\t\t\"label\": \"Task name\",\n\t\t\t\t\t\"open\": true,\n\t\t\t\t\t\"visible\": \"\",\n\t\t\t\t\t\"children\": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"text3\",\n\t\t\t\t\t\t\t\"type\": \"text\",\n\t\t\t\t\t\t\t\"text\": \"By default, the SAS file name will be used as the task label in the Airflow DAG. Since it must be unique, a sequence number will be added to the object name.\\nIf instead, you prefer to use a custom label, specify it here. If not empty, it will be used as the task label in Airflow. The name must be unique across the Airflow DAG.\",\n\t\t\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"__task_name\",\n\t\t\t\t\t\t\t\"type\": \"textfield\",\n\t\t\t\t\t\t\t\"label\": \"Task name (must be unique across the DAG, alphanumeric characters, dashes, dots and underscores only):\",\n\t\t\t\t\t\t\t\"placeholder\": \"Name of the task in Airflow. If empty, takes the flow/program/job definition name.\",\n\t\t\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"id\": \"pageOptions\",\n\t\t\t\"type\": \"page\",\n\t\t\t\"label\": \"Options\",\n\t\t\t\"children\": [\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"text1\",\n\t\t\t\t\t\"type\": \"text\",\n\t\t\t\t\t\"text\": \"Overwrite default options set at the DAG initialization step.\\nOnly valid for SAS files or code.\",\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"section5\",\n\t\t\t\t\t\"type\": \"section\",\n\t\t\t\t\t\"label\": \"SAS Studio flows, programs and job definitions shared options\",\n\t\t\t\t\t\"open\": true,\n\t\t\t\t\t\"visible\": [\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\"$__task_type\",\n\t\t\t\t\t\t\t\"=\",\n\t\t\t\t\t\t\t\"FILE\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\t\"|\",\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\"$__task_type\",\n\t\t\t\t\t\t\t\"=\",\n\t\t\t\t\t\t\t\"CODE\"\n\t\t\t\t\t\t]\n\t\t\t\t\t],\n\t\t\t\t\t\"children\": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"__connection_name\",\n\t\t\t\t\t\t\t\"type\": \"textfield\",\n\t\t\t\t\t\t\t\"label\": \"SAS connection name in Airflow:\",\n\t\t\t\t\t\t\t\"placeholder\": \"Name of the SAS connection in Airflow\",\n\t\t\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"__exec_log\",\n\t\t\t\t\t\t\t\"type\": \"radiogroup\",\n\t\t\t\t\t\t\t\"label\": \"Output the execution log:\",\n\t\t\t\t\t\t\t\"items\": [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"value\": \"INHERIT\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"value\": \"True\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"value\": \"False\"\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"section6\",\n\t\t\t\t\t\"type\": \"section\",\n\t\t\t\t\t\"label\": \"SAS Studio flows and programs specific options\",\n\t\t\t\t\t\"open\": true,\n\t\t\t\t\t\"visible\": [\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\"$__task_type\",\n\t\t\t\t\t\t\t\"=\",\n\t\t\t\t\t\t\t\"FILE\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\t\"|\",\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\"$__task_type\",\n\t\t\t\t\t\t\t\"=\",\n\t\t\t\t\t\t\t\"CODE\"\n\t\t\t\t\t\t]\n\t\t\t\t\t],\n\t\t\t\t\t\"children\": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"__compute_context\",\n\t\t\t\t\t\t\t\"type\": \"textfield\",\n\t\t\t\t\t\t\t\"label\": \"Compute context:\",\n\t\t\t\t\t\t\t\"placeholder\": \"Name of the compute context\",\n\t\t\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"__codegen_init_code\",\n\t\t\t\t\t\t\t\"type\": \"radiogroup\",\n\t\t\t\t\t\t\t\"label\": \"Generate init code:\",\n\t\t\t\t\t\t\t\"items\": [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"value\": \"INHERIT\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"value\": \"True\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"value\": \"False\"\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"__codegen_wrap_code\",\n\t\t\t\t\t\t\t\"type\": \"radiogroup\",\n\t\t\t\t\t\t\t\"label\": \"Generate wrapper code:\",\n\t\t\t\t\t\t\t\"items\": [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"value\": \"INHERIT\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"value\": \"True\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"value\": \"False\"\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"section4\",\n\t\t\t\t\t\"type\": \"section\",\n\t\t\t\t\t\"label\": \"SAS job definitions specific options\",\n\t\t\t\t\t\"open\": true,\n\t\t\t\t\t\"visible\": [\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\"$__task_type\",\n\t\t\t\t\t\t\t\"=\",\n\t\t\t\t\t\t\t\"FILE\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\t\"|\",\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\"$__task_type\",\n\t\t\t\t\t\t\t\"=\",\n\t\t\t\t\t\t\t\"CODE\"\n\t\t\t\t\t\t]\n\t\t\t\t\t],\n\t\t\t\t\t\"children\": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"__job_airflow_macrovars\",\n\t\t\t\t\t\t\t\"type\": \"radiogroup\",\n\t\t\t\t\t\t\t\"label\": \"Add Airflow context variables as macro-variables\",\n\t\t\t\t\t\t\t\"items\": [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"value\": \"INHERIT\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"value\": \"True\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"value\": \"False\"\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"id\": \"pageParameters\",\n\t\t\t\"type\": \"page\",\n\t\t\t\"label\": \"Parameters\",\n\t\t\t\"children\": [\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"text2\",\n\t\t\t\t\t\"type\": \"text\",\n\t\t\t\t\t\"text\": \"Overwrite default parameters set at the DAG initialization step.\\nOnly valid for SAS files or code.\\n\\nThese parameters will be sent:\\n   - to a SAS Studio flow or program as SAS macro-variables or environment variables (see choice below),\\n   - to a SAS job definition as SAS macro-variables.\",\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"section8\",\n\t\t\t\t\t\"type\": \"section\",\n\t\t\t\t\t\"label\": \"Parameters\",\n\t\t\t\t\t\"open\": true,\n\t\t\t\t\t\"visible\": [\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\"$__task_type\",\n\t\t\t\t\t\t\t\"=\",\n\t\t\t\t\t\t\t\"FILE\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\t\"|\",\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\"$__task_type\",\n\t\t\t\t\t\t\t\"=\",\n\t\t\t\t\t\t\t\"CODE\"\n\t\t\t\t\t\t]\n\t\t\t\t\t],\n\t\t\t\t\t\"children\": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"__dag_parameters\",\n\t\t\t\t\t\t\t\"type\": \"textarea\",\n\t\t\t\t\t\t\t\"label\": \"Parameters to pass to the flow/program/job (JSON-like key/value pairs separated by commas):\",\n\t\t\t\t\t\t\t\"placeholder\": \"\\\"env1\\\": \\\"val1\\\",\\n\\\"env2\\\": \\\"val2\\\"\",\n\t\t\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"__dag_parameter_method\",\n\t\t\t\t\t\t\t\"type\": \"radiogroup\",\n\t\t\t\t\t\t\t\"label\": \"Send parameters to flows/program as:\",\n\t\t\t\t\t\t\t\"items\": [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"value\": \"INHERIT\",\n\t\t\t\t\t\t\t\t\t\"label\": \"INHERIT\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"value\": \"MV\",\n\t\t\t\t\t\t\t\t\t\"label\": \"SAS macro-variables\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"value\": \"EV\",\n\t\t\t\t\t\t\t\t\t\"label\": \"Environment variables\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"value\": \"BOTH\",\n\t\t\t\t\t\t\t\t\t\"label\": \"Both\"\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"section11\",\n\t\t\t\t\t\"type\": \"section\",\n\t\t\t\t\t\"label\": \"Parameter output\",\n\t\t\t\t\t\"open\": true,\n\t\t\t\t\t\"visible\": \"\",\n\t\t\t\t\t\"children\": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"text4\",\n\t\t\t\t\t\t\t\"type\": \"text\",\n\t\t\t\t\t\t\t\"text\": \"Set a variable prefix to push any macro variables that start with the prefix\\nand make them available to downstream tasks as XCom variables.\",\n\t\t\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"__output_var_prefix\",\n\t\t\t\t\t\t\t\"type\": \"textfield\",\n\t\t\t\t\t\t\t\"label\": \"Prefix of macro variables for Airflow XCom output:\",\n\t\t\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"id\": \"pageDatasets\",\n\t\t\t\"type\": \"page\",\n\t\t\t\"label\": \"Datasets\",\n\t\t\t\"children\": [\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"section9\",\n\t\t\t\t\t\"type\": \"section\",\n\t\t\t\t\t\"label\": \"Datasets produced\",\n\t\t\t\t\t\"open\": true,\n\t\t\t\t\t\"visible\": \"\",\n\t\t\t\t\t\"children\": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"text7\",\n\t\t\t\t\t\t\t\"type\": \"text\",\n\t\t\t\t\t\t\t\"text\": \"An Airflow dataset is a stand-in for a logical grouping of data. Datasets may be updated by upstream “producer” tasks, and dataset updates contribute to scheduling downstream “consumer” DAGs.\\n\\nIn other words, a downstream DAG can be triggered upon the update of a logical dataset from an upstream DAG: \\\"producer DAG\\\" => dataset => \\\"consumer DAG\\\"\\n\\nA dataset is defined by a Uniform Resource Identifier (URI) and is case sensitive.\",\n\t\t\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"__task_datasets_produced\",\n\t\t\t\t\t\t\t\"type\": \"textarea\",\n\t\t\t\t\t\t\t\"label\": \"Datasets updated by this task (logical URIs separated by commas):\",\n\t\t\t\t\t\t\t\"placeholder\": \"sas://mylib/mytable,\\nfile://mypath/myfile.csv,\\ns3://mybucket/myfile.parquet\",\n\t\t\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"id\": \"pageAbout\",\n\t\t\t\"type\": \"page\",\n\t\t\t\"label\": \"About\",\n\t\t\t\"children\": [\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"text5\",\n\t\t\t\t\t\"type\": \"text\",\n\t\t\t\t\t\"text\": \"The \\\"Airflow - Generate DAG\\\" tool is a set of 3 Custom Steps that enables SAS Studio Flow users to create an Airflow DAG (Directed Acyclic Graph) directly from a SAS Studio Flow.\\n\\n“A DAG is defined in a Python script, which represents the DAGs structure (tasks and their dependencies) as code.”\\n\\nThe 3 custom steps that need to be used together:\\n     Airflow - Initialize DAG\\n          Define the Airflow DAG properties – one per flow\\n     Airflow - Add Task\\n          Define an Airflow task to add to the DAG – one or more per flow\\n     Airflow - Finalize DAG\\n          Create the Airflow DAG Python script – one per flow\\n\\nBuilt and tested on SAS Viya Stable Release 2023.12.\\n\\nAuthor: Nicolas.Robert@sas.com\\n\\nVersion: 1.5 (21FEB2024)\",\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"input_step_1\",\n\t\t\t\t\t\"type\": \"inputtable\",\n\t\t\t\t\t\"label\": \"Input task\",\n\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"input_step_2\",\n\t\t\t\t\t\"type\": \"inputtable\",\n\t\t\t\t\t\"label\": \"Input task\",\n\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"input_step_3\",\n\t\t\t\t\t\"type\": \"inputtable\",\n\t\t\t\t\t\"label\": \"Input task\",\n\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"input_step_4\",\n\t\t\t\t\t\"type\": \"inputtable\",\n\t\t\t\t\t\"label\": \"Input task\",\n\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"input_step_5\",\n\t\t\t\t\t\"type\": \"inputtable\",\n\t\t\t\t\t\"label\": \"Input task\",\n\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"input_step_6\",\n\t\t\t\t\t\"type\": \"inputtable\",\n\t\t\t\t\t\"label\": \"Input task\",\n\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"input_step_7\",\n\t\t\t\t\t\"type\": \"inputtable\",\n\t\t\t\t\t\"label\": \"Input task\",\n\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"input_step_8\",\n\t\t\t\t\t\"type\": \"inputtable\",\n\t\t\t\t\t\"label\": \"Input task\",\n\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"input_step_9\",\n\t\t\t\t\t\"type\": \"inputtable\",\n\t\t\t\t\t\"label\": \"Input task\",\n\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"input_step_10\",\n\t\t\t\t\t\"type\": \"inputtable\",\n\t\t\t\t\t\"label\": \"Input task\",\n\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"output_step_1\",\n\t\t\t\t\t\"type\": \"outputtable\",\n\t\t\t\t\t\"label\": \"Output task\",\n\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t],\n\t\"syntaxversion\": \"1.3.0\",\n\t\"values\": {\n\t\t\"__task_type\": {\n\t\t\t\"value\": \"FILE\",\n\t\t\t\"label\": \"Select a SAS file (flow, program, job)\"\n\t\t},\n\t\t\"__task_object_path\": \"\",\n\t\t\"__task_code\": \"\",\n\t\t\"__task_fs_file\": \"\",\n\t\t\"__task_fs_con_name\": \"fs_default\",\n\t\t\"__task_fs_poke\": 60,\n\t\t\"__task_fs_timeout\": 3600,\n\t\t\"__task_fs_mode\": {\n\t\t\t\"value\": \"poke\",\n\t\t\t\"label\": \"Poke\"\n\t\t},\n\t\t\"__task_trigger_rule\": {\n\t\t\t\"value\": \"all_success\"\n\t\t},\n\t\t\"__task_name\": \"\",\n\t\t\"__connection_name\": \"INHERIT\",\n\t\t\"__exec_log\": {\n\t\t\t\"value\": \"INHERIT\"\n\t\t},\n\t\t\"__compute_context\": \"INHERIT\",\n\t\t\"__codegen_init_code\": {\n\t\t\t\"value\": \"INHERIT\"\n\t\t},\n\t\t\"__codegen_wrap_code\": {\n\t\t\t\"value\": \"INHERIT\"\n\t\t},\n\t\t\"__job_airflow_macrovars\": {\n\t\t\t\"value\": \"INHERIT\"\n\t\t},\n\t\t\"__dag_parameters\": \"INHERIT\",\n\t\t\"__dag_parameter_method\": {\n\t\t\t\"value\": \"INHERIT\",\n\t\t\t\"label\": \"INHERIT\"\n\t\t},\n\t\t\"__output_var_prefix\": \"\",\n\t\t\"__task_datasets_produced\": \"\",\n\t\t\"input_step_1\": {\n\t\t\t\"library\": \"\",\n\t\t\t\"table\": \"\"\n\t\t},\n\t\t\"input_step_2\": {\n\t\t\t\"library\": \"\",\n\t\t\t\"table\": \"\"\n\t\t},\n\t\t\"input_step_3\": {\n\t\t\t\"library\": \"\",\n\t\t\t\"table\": \"\"\n\t\t},\n\t\t\"input_step_4\": {\n\t\t\t\"library\": \"\",\n\t\t\t\"table\": \"\"\n\t\t},\n\t\t\"input_step_5\": {\n\t\t\t\"library\": \"\",\n\t\t\t\"table\": \"\"\n\t\t},\n\t\t\"output_step_1\": {\n\t\t\t\"library\": \"\",\n\t\t\t\"table\": \"\"\n\t\t}\n\t}\n}","templates":{"SAS":"%macro DAGtask ;\n\n   %local __maxInputs __input_tables __new_seq __task_id ;\n\n   /* According to the number of inputs permitted - can be changed */\n   %let __maxInputs=10 ;\n   %let __input_tables= ;\n   %do i=1 %to &__maxInputs ;\n      %global input_step_&i ;\n      %let __input_tables=&__input_tables &&input_step_&i ;\n   %end ;\n   \n   %put &=__input_tables ;\n   \n   /* Derive new sequence number */\n   data _null_ ;\n      retain seq 0 ;\n      set __dag__ end=eof ;\n      if __task_seq>seq then seq=__task_seq ;\n      if eof then call symput(\"__new_seq\",strip(put(seq+1,12.))) ;\n   run ;\n   %put &=__new_seq ;\n   \n   /* Set task id */\n   %let __task_id=task&__new_seq ;\n   \n   data __task__ ;\n      length __task_name              $    36\n             __task_id                $    36\n             __task_seq                     8  \n             __task_predecessor_id    $    36\n             __task_type              $    10\n             __task_object_path       $  1000\n             __task_code              $ 32767\n             __task_fs_file           $  1000\n             __task_fs_con_name       $    50\n             __task_fs_poke                 8\n             __task_fs_timeout              8\n             __task_fs_mode           $    10\n             __task_trigger_rule      $    30\n             __compute_context        $    50 \n             __connection_name        $    50 \n             __exec_log               $     7 \n             __codegen_init_code      $     7 \n             __codegen_wrap_code      $     7\n             __job_airflow_macrovars  $     7\n             __dag_parameters         $  1000\n             __dag_parameter_method   $     7\n             __output_var_prefix      $  1000\n             __task_datasets_produced $  1000\n      ;\n      set &__input_tables end=eof ;\n      __task_predecessor_id=__task_id ;\n      __task_id=\"&__task_id\" ;\n      __task_seq=&__new_seq ;\n      __task_name=\"&__task_name\" ;\n      __task_type=\"&__task_type\" ;\n      __task_object_path=\"&__task_object_path\" ;\n      __task_code=\"&__task_code\" ;\n      __task_fs_file=\"&__task_fs_file\" ;\n      __task_fs_con_name=\"&__task_fs_con_name\" ;\n      __task_fs_poke=&__task_fs_poke ;\n      __task_fs_timeout=&__task_fs_timeout ;\n      __task_fs_mode=\"&__task_fs_mode\" ;\n      __task_trigger_rule=\"&__task_trigger_rule\" ;\n   \n      __compute_context=strip(\"&__compute_context\") ;\n      __connection_name=strip(\"&__connection_name\") ;\n      __exec_log=strip(\"&__exec_log\") ;\n      __codegen_init_code=strip(\"&__codegen_init_code\") ;\n      __codegen_wrap_code=strip(\"&__codegen_wrap_code\") ;\n      __job_airflow_macrovars=strip(\"&__job_airflow_macrovars\") ;\n      __dag_parameters=strip(\"&__dag_parameters\") ;\n      __dag_parameter_method=strip(\"&__dag_parameter_method\") ;\n      __output_var_prefix=upcase(strip(\"&__output_var_prefix\")) ;\n      __task_datasets_produced=strip(\"&__task_datasets_produced\") ;\n   run ;\n   \n   data &output_step_1 ;\n      length __task_id $ 36 ;\n      __task_id=\"&__task_id\" ;\n   run ;\n   \n   data __dag__ ;\n      set __dag__ __task__ ;\n   run ;\n\n%mend DAGtask ;\n\n%DAGtask ;\n\n\n/* Clean-up */\n\n/* Clean-up macros */\n\n%if %sysmacexist(DAGtask)=1 %then %do ; \n   %sysmacdelete DAGtask ;\n%end ;\n\n"}}